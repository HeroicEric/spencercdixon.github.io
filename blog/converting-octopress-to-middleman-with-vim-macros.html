<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <title>Spencer Dixon - Converting Octopress To Middleman With Vim Macros</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/blog/feed.xml" />
    <link href="../stylesheets/all.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <div class="wrapper">
      <aside>
        <nav class="main-nav">
<a href="../">    <img class="round-image" src="../images/spencer.jpeg" />
</a>
  <ul class="nav-links">
    <li class="text-center"><a href="../about.html">ABOUT</a></li>
    <li class="text-center"><a href="../">BLOG</a></li>
    <li class="text-center"><a href="../book_list.html">BOOKS</a></li>
  </ul>

  <!-- Begin MailChimp Signup Form -->
  <div id="mc_embed_signup">
    <form action="//spencerdixon.us11.list-manage.com/subscribe/post?u=019dc2164dbdc16d844cf6dc2&amp;id=666e212a4d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
      <div id="mc_embed_signup_scroll">

        <div class="mc-field-group">
          <label for="mce-EMAIL" style="display: none;">Email Address </label>
          <input type="email" placeholder="Email To Subscribe" name="EMAIL" class="required email" id="mce-EMAIL">
        </div>
        <div id="mce-responses" class="clear">
          <div class="response" id="mce-error-response" style="display:none"></div>
          <div class="response" id="mce-success-response" style="display:none"></div>
        </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
        <div style="position: absolute; left: -5000px;"><input type="text" name="b_019dc2164dbdc16d844cf6dc2_666e212a4d" tabindex="-1" value=""></div>
        <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" style="display: none;" class="button"></div>
      </div>
    </form>
  </div>
  <!--End mc_embed_signup-->

  <section class="social-media">
    <ul>
      <li class="social-icon">
<a target="_blank" href="https://github.com/spencercdixon">          <i class="fa fa-github-square fa-2x"></i>
</a>      </li>
      <li class="social-icon">
<a target="_blank" href="https://twitter.com/SpencerCDixon">          <i class="fa fa-twitter-square fa-2x"></i>
</a>      </li>
      <li class="social-icon">
<a target="_blank" href="https://www.linkedin.com/in/spencercdixon">          <i class="fa fa-linkedin-square fa-2x"></i>
</a>      </li>
    </ul>
  </section>
</nav>

<footer>
  Handcrafted Bytes<br />
  Made With <i class="fa fa-diamond"></i> <br />
  By Spencer Dixon
</footer>


      </aside>

      <article class="blog-post">
            <h1 id="article-title">Converting Octopress To Middleman With Vim Macros</h1>
    <hr>
    <div class="tags">
      <ul>
        <li class="tag"><a href="tags/vim.html">vim</a></li>
        <li class="tag"><a href="tags/middleman.html">middleman</a></li>
      </ul>
    </div>

  <p>Converting from Octopress to Middleman was one of the best decisions I&#39;ve ever
made.  I finally found a blogging platform that integrates seamlessly into my
everyday workflow as a Rails developer.  One thing I wasn&#39;t looking forward to
though was converting all my old Octopress posts into the proper Middleman format.
Thank god for Vim macros.</p>

<p></p>

<p>A Vim macro defined by <a href="http://vim.wikia.com/wiki/Macros">their wiki</a>:</p>

<blockquote>
<p>Recording a macro is a great way to perform a one-time task, 
 or to get things done quickly when you don&#39;t want to mess with Vim script or 
 mappings, or if you do not yet know how to do it more elegantly.</p>
</blockquote>

<p>Essentially, a macro is just a sequence of vim commands you record and then 
reapply somewhere else.  If you&#39;re familiar with the <code>.</code> vim command, it&#39;s just
the period command on steroids.</p>

<h2>Front Matter Before And After</h2>

<p>Here is an example of what the original Octopress YAML front matter looked like:  </p>
<pre class="highlight ruby"><code><span class="o">---</span>
<span class="ss">layout: </span><span class="n">post</span>
<span class="ss">title: </span><span class="s2">"Gosu Tutorial"</span>
<span class="ss">date: </span><span class="mi">2014</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">11</span> <span class="mi">11</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">50</span> <span class="o">+</span><span class="mi">0800</span>
<span class="ss">comments: </span><span class="kp">true</span>
<span class="ss">categories: </span><span class="n">ruby</span><span class="p">,</span> <span class="n">gosu</span><span class="p">,</span> <span class="n">tutorials</span>
<span class="o">---</span>
</code></pre>

<p>This is what I needed the front matter to look like for Middleman:</p>
<pre class="highlight ruby"><code><span class="o">---</span>
<span class="ss">title: </span><span class="no">Gosu</span> <span class="no">Tutorial</span>
<span class="ss">date: </span><span class="mi">2014</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">11</span> 
<span class="ss">tags: </span><span class="n">ruby</span><span class="p">,</span> <span class="n">gosu</span><span class="p">,</span> <span class="n">tutorials</span>
<span class="o">---</span>
</code></pre>

<p>As you can see they&#39;re very similar.  After removing a few lines, getting rid of
some quotes, and re-naming categories to tags it should be good to go for
Middleman.</p>

<h2>Creating The Macro</h2>

<p>To start recording a macro you press <code>q</code> and then any other letter you want to
bind that macro to.  For this example I&#39;m going to use <code>r</code> for replace.</p>

<p>Here are all the steps of the macro annotated for clarity:  </p>
<pre class="highlight viml"><code>qr   # <span class="k">start</span> recording macro with cursor <span class="k">on</span> line one  
<span class="k">j</span>    # move down <span class="k">a</span> line <span class="k">to</span> <span class="s1">'layout: post'</span>  
dd   # delete that line since I don'<span class="k">t</span> need it   
<span class="k">f</span>"   # <span class="k">go</span> <span class="k">to</span> the <span class="k">first</span> double<span class="p">-</span>quotes  
<span class="k">x</span>    # delete the double quote  
<span class="k">f</span>"   # <span class="k">go</span> <span class="k">to</span> the next double quote  
<span class="k">x</span>    # delete it  
<span class="m">2</span><span class="k">j</span>   # move down <span class="k">to</span> the <span class="s1">'comments: true'</span> line  
dd   # delete it  
<span class="k">j</span>    # move down <span class="k">to</span> <span class="s1">'categories'</span> line  
<span class="k">cw</span>   # change word <span class="s1">'categories'</span>  
<span class="k">tags</span> # type out <span class="k">tags</span> <span class="k">to</span> be used by Middleman  
esc  # <span class="k">exit</span> insert <span class="k">mode</span>  
<span class="k">q</span>    # stop the recording  
</code></pre>

<p>Now that we have our macro built we can apply it to any files that need to be
converted by typing <code>@r</code>.  Two letters to change 5-6 lines of text into the
exact format we need.  That is strategic laziness at its finest! </p>


  <a href="#" id="hide_comments">Hide Comments<a>
    <div id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
                  var disqus_shortname = 'spencerdixon';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


      </article>
    </div>

    <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-51806130-1', 'auto');
  ga('send', 'pageview');
</script>
    <script src="../javascripts/all.js" type="text/javascript"></script>
  </body>
</html>
